(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const g of r.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const h=20,E=14,x=30,p={LEFT:"ArrowLeft",DOWN:"ArrowDown",RIGHT:"ArrowRight",UP:"ArrowUp"},d=document.querySelector("canvas"),a=d.getContext("2d"),S=document.querySelector("#score");let m=0;const f=new window.Audio("./my-nigga.mp3");f.volume=.5;d.width=h*E;d.height=h*x;a.scale(h,h);const c=A(E,x);function A(o,t){return Array(t).fill().map(()=>Array(o).fill(0))}const O=[["red"],["blue"],["green"],["orange"],["cyan"],["yellow"],["pink"],["white"]],u=[[[1,0,0],[1,1,1]],[[1,1,1],[1,0,0]],[[0,1,0],[1,1,1]],[[1],[1],[1],[1]],[[1,1],[1,1]],[[0,0,0,0],[1,1,1,1]],[[1,1,1],[0,1,0]],[[1],[1]],[[1,1,0],[0,1,1]],[[0,0,1],[1,1,1]]],e={position:{x:6,y:0},shape:[[1,1],[1,1]]};let w=0,T=0;function y(o=0){const t=o-T;T=o,w+=t,w>100&&(e.position.y++,w=0),l()&&(e.position.y--,L(),M(),e.shape=u[Math.floor(Math.random()*u.length)],e.position.y=0,e.position.x=Math.floor(Math.random()*10),l()&&(window.alert("Game Over! Try again."),c.forEach(s=>s.fill(0)),m=0,y())),v(),window.requestAnimationFrame(y)}function v(){a.fillStyle="black",a.fillRect(0,0,d.width,d.height),c.forEach((o,t)=>{o.forEach((s,n)=>{s===1&&(a.fillStyle="purple",a.fillRect(n,t,1,1))})}),e.shape.forEach((o,t)=>{o.forEach((s,n)=>{s===1&&(a.fillStyle=O[Math.floor(Math.random()*O.length)],a.fillRect(n+e.position.x,t+e.position.y,1,1))})}),S.innerText=m}document.addEventListener("keydown",o=>{if(o.code===p.LEFT&&(e.position.x--,l()&&e.position.x++),o.code===p.RIGHT&&(e.position.x++,l()&&e.position.x--),o.code===p.DOWN&&(e.position.y++,l()&&(e.position.y--,L(),M())),o.code===p.UP){const t=[];for(let n=0;n<e.shape[0].length;n++){const i=[];for(let r=e.shape.length-1;r>=0;r--)i.push(e.shape[r][n]);t.push(i)}const s=e.shape;e.shape=t,l()&&(e.shape=s)}});function l(){return e.shape.find((o,t)=>o.find((s,n)=>{var i;return s!==0&&(e.position.y+t<0||((i=c[e.position.y+t])==null?void 0:i[e.position.x+n])!==0)}))}function L(){e.shape.forEach((o,t)=>{o.forEach((s,n)=>{s===1&&(c[e.position.y+t][e.position.x+n]=1)})}),e.shape=u[Math.floor(Math.random()*u.length)],e.position.x=Math.floor(Math.random()*(E-e.shape[0].length+1)),e.position.y=0,l()&&(window.alert("Game Over! Try again."),c.forEach(o=>o.fill(0)),m=0,y())}function M(){for(let o=0;o<c.length;o++)c[o].every(t=>t===1)&&(c.splice(o,1),c.unshift([0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m+=100)}document.querySelector("section").addEventListener("click",()=>{f.addEventListener("ended",()=>{f.currentTime=0,f.play()}),f.play(),y()});
